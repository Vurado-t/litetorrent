Точки расширения:

- Несколько UI: CLI, Desktop, Web
- Добавление новых метрик загрузки/раздачи
- Добавление новых стратегий загрузки/раздачи


Описание новой архитектуры (PS: **нарисовать схему**):

- LiteTorrent.Core
- LiteTorrent.Domain
- LiteTorrent.Application
    - Storage
        - Отвечает за хранение данных на диске
        - Можно получить статистику хранения данных на диске
        - Можно подписаться на события. Для каждого подписчика создаётся новый Channel, из которого он будет читать, и в который будет писать.
        - IHashTreeRepository
        - ISharedFileRepository
    - Exchanger
        - Крутится в бесконечном цикле и управляет раздачей/загрузкой
        - Управляет раздачей по различным стратегиям, для их реализации использует:
            - Контекст подключения
                - ID клиента (пускай его генерирует подключающийся клиент)
                - …
                - Статистика подключения
                    - Сколько кусков передали
                    - Сколько кусков загрузили
            - Метрики из Storage
        - Использует Storage через Channel, так как обмен данными предполагается с несколькими клиентами одновременно, соответственно получаем задачу производителя-потребителя. Пишет через Channel (Storage.Write(subscriptionId, piece)), и читает через Channel (Storage.Consume()), так как нужно получать события о том, что появился какой-то кусок на диске.
    - Commands
- LiteTorrent.Adapters
    - Exchanger
        - Реализует сериализацию кусков, установку соединения, передачу кусков по сети определённому получателю (при этом логика определения получателя в Application Layer)
    - Repository
        - HashTreeRepository
        - SharedFileRepository
    - HTTP-Controller
        - Парсит запросы, вызывает Commands
- LiteTorrent.UI.CLI
    - Консольный клиент
